#include <stdio.h>
#include <string.h>

// Define structure for Bank Account
struct BankAccount {
    int accountNumber;
    char holderName[50];
    char accountType[20];
    float balance;
};

// Function to deposit money
void deposit(struct BankAccount *acc, float amount) {
    acc->balance += amount;
    printf("Amount %.2f deposited successfully.\n", amount);
}

// Function to withdraw money
void withdraw(struct BankAccount *acc, float amount) {
    if(amount > acc->balance) {
        printf("Insufficient balance!\n");
    } else {
        acc->balance -= amount;
        printf("Amount %.2f withdrawn successfully.\n", amount);
    }
}

// Function to display account details
void display(struct BankAccount acc) {
    printf("\nAccount Number: %d\n", acc.accountNumber);
    printf("Account Holder: %s\n", acc.holderName);
    printf("Account Type: %s\n", acc.accountType);
    printf("Balance: %.2f\n", acc.balance);
}

int main() {
    int n, choice, accNum, i;
    float amount;

    printf("Enter number of bank accounts: ");
    scanf("%d", &n);

    struct BankAccount accounts[n];

    // Input details for each account
    for(i = 0; i < n; i++) {
        printf("\nEnter details for account %d:\n", i + 1);

        printf("Account Number: ");
        scanf("%d", &accounts[i].accountNumber);

        printf("Account Holder Name: ");
        getchar(); // Consume newline
        fgets(accounts[i].holderName, sizeof(accounts[i].holderName), stdin);
        accounts[i].holderName[strcspn(accounts[i].holderName, "\n")] = 0; // Remove newline

        printf("Account Type (Savings/Current): ");
        fgets(accounts[i].accountType, sizeof(accounts[i].accountType), stdin);
        accounts[i].accountType[strcspn(accounts[i].accountType, "\n")] = 0; // Remove newline

        printf("Initial Balance: ");
        scanf("%f", &accounts[i].balance);
    }

    // Menu-driven operations
    do {
        printf("\n----- Bank Menu -----\n");
        printf("1. Deposit\n");
        printf("2. Withdraw\n");
        printf("3. Display Account Details\n");
        printf("4. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);

        switch(choice) {
            case 1:
                printf("Enter account number: ");
                scanf("%d", &accNum);
                printf("Enter amount to deposit: ");
                scanf("%f", &amount);
                for(i = 0; i < n; i++) {
                    if(accounts[i].accountNumber == accNum) {
                        deposit(&accounts[i], amount);
                        break;
                    }
                }
                if(i == n) printf("Account not found!\n");
                break;

            case 2:
                printf("Enter account number: ");
                scanf("%d", &accNum);
                printf("Enter amount to withdraw: ");
                scanf("%f", &amount);
                for(i = 0; i < n; i++) {
                    if(accounts[i].accountNumber == accNum) {
                        withdraw(&accounts[i], amount);
                        break;
                    }
                }
                if(i == n) printf("Account not found!\n");
                break;

            case 3:
                printf("Enter account number: ");
                scanf("%d", &accNum);
                for(i = 0; i < n; i++) {
                    if(accounts[i].accountNumber == accNum) {
                        display(accounts[i]);
                        break;
                    }
                }
                if(i == n) printf("Account not found!\n");
                break;

            case 4:
                printf("Exiting program...\n");
                break;

            default:
                printf("Invalid choice! Try again.\n");
        }

    } while(choice != 4);

    return 0;
}
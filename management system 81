#include <stdio.h>
#include <string.h>

// Define structure for an inventory item
struct Item {
    int id;
    char name[50];
    int quantity;
    float price;
};

int main() {
    struct Item items[100]; // Maximum 100 items
    int n = 0;              // Current number of items
    int choice;

    do {
        // Display menu
        printf("\n===== Inventory Management System =====\n");
        printf("1. Add Item\n");
        printf("2. Display All Items\n");
        printf("3. Search Item by ID\n");
        printf("4. Update Item by ID\n");
        printf("5. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);

        switch(choice) {
            case 1: {
                // Add new item
                if(n >= 100) {
                    printf("Inventory is full! Cannot add more items.\n");
                    break;
                }
                printf("\nEnter details for item %d:\n", n + 1);
                printf("ID: ");
                scanf("%d", &items[n].id);
                getchar(); // Clear buffer
                printf("Name: ");
                fgets(items[n].name, sizeof(items[n].name), stdin);
                size_t len = strlen(items[n].name);
                if(len > 0 && items[n].name[len - 1] == '\n')
                    items[n].name[len - 1] = '\0';
                printf("Quantity: ");
                scanf("%d", &items[n].quantity);
                printf("Price: ");
                scanf("%f", &items[n].price);

                n++; // Increase item count
                printf("Item added successfully!\n");
                break;
            }

            case 2: {
                // Display all items
                if(n == 0) {
                    printf("No items in inventory.\n");
                    break;
                }
                printf("\n===== Inventory List =====\n");
                for(int i = 0; i < n; i++) {
                    printf("\nItem %d:\n", i + 1);
                    printf("ID: %d\n", items[i].id);
                    printf("Name: %s\n", items[i].name);
                    printf("Quantity: %d\n", items[i].quantity);
                    printf("Price: %.2f\n", items[i].price);
                }
                break;
            }

            case 3: {
                // Search item by ID
                if(n == 0) {
                    printf("No items in inventory.\n");
                    break;
                }
                int searchId, found = 0;
                printf("Enter ID to search: ");
                scanf("%d", &searchId);
                for(int i = 0; i < n; i++) {
                    if(items[i].id == searchId) {
                        printf("\nItem found:\n");
                        printf("ID: %d\n", items[i].id);
                        printf("Name: %s\n", items[i].name);
                        printf("Quantity: %d\n", items[i].quantity);
                        printf("Price: %.2f\n", items[i].price);
                        found = 1;
                        break;
                    }
                }
                if(!found) {
                    printf("Item with ID %d not found.\n", searchId);
                }
                break;
            }

            case 4: {
                // Update item by ID
                if(n == 0) {
                    printf("No items in inventory.\n");
                    break;
                }
                int updateId, found = 0;
                printf("Enter ID to update: ");
                scanf("%d", &updateId);
                for(int i = 0; i < n; i++) {
                    if(items[i].id == updateId) {
                        found = 1;
                        getchar(); // Clear buffer
                        printf("Enter new name: ");
                        fgets(items[i].name, sizeof(items[i].name), stdin);
                        size_t len = strlen(items[i].name);
                        if(len > 0 && items[i].name[len - 1] == '\n')
                            items[i].name[len - 1] = '\0';
                        printf("Enter new quantity: ");
                        scanf("%d", &items[i].quantity);
                        printf("Enter new price: ");
                        scanf("%f", &items[i].price);
                        printf("Item updated successfully!\n");
                        break;
                    }
                }
                if(!found) {
                    printf("Item with ID %d not found.\n", updateId);
                }
                break;
            }

            case 5:
                printf("Exiting program. Goodbye!\n");
                break;

            default:
                printf("Invalid choice! Please try again.\n");
        }

    } while(choice != 5);

    return 0;
}